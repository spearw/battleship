{"code":"!function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){const i=r(1),a=r(2),n=r(3),o=r(4);function l(t=!1,e=!0,r=\"player\",l=\"AI\",h=10){console.log(\"creating players...\");let c=n(t,r),u=n(e,l);console.log(\"generating boards...\");let d=i(h),p=i(h);console.log(\"creating ships\");let f=a.createShip(a.carrier),m=a.createShip(a.battleship),x=a.createShip(a.cruiser),g=a.createShip(a.destroyer),b=a.createShip(a.patrolBoat);console.log(\"placing ships...\"),s(d,f,m,x,g,b),s(p,a.createShip(a.carrier),a.createShip(a.battleship),a.createShip(a.cruiser),a.createShip(a.destroyer),a.createShip(a.patrolBoat)),console.log(\"showing boards...\");let y=document.getElementById(\"board1\"),S=document.getElementById(\"board2\");o.updateBoard(d,y,c,u,p,S),o.updateBoard(p,S,u,c,d,y)}function s(t,e,r,i,a,n){h(t,e),h(t,r),h(t,i),h(t,a),h(t,n)}function h(t,e){let r=t.size;for(;;){let i=Math.floor(Math.random()*(+r-0))+0,a=Math.floor(Math.random()*(+r-0))+0,n=Math.random()>=.5;if(t.placeShip(i,a,e,n))break}}document.getElementById(\"newgame\").addEventListener(\"click\",()=>{l()}),l()},function(t,e){const r=t=>{matrix=[];for(var e=0;e<t;e++)matrix[e]=new Array(t),matrix[e].fill(null);return matrix};t.exports=t=>({size:t,matrix:r(t),placeShip(t,e,r,a=!0){if(a)for(r.horizontal=!0,i=0;i<r.length;i++){if(null!=this.matrix[e][t+i])throw\"space occupied\";if(e>=matrix.length||t+i>=matrix[e].length)throw r.name+\" off the board\"}else for(r.horizontal=!1,i=0;i<r.length;i++){if(e+i>=matrix.length||t>=matrix[e].length)throw\"off the board\";if(null!=this.matrix[e+i][t])throw\"space occupied\"}if(a)for(i=0;i<r.length;i++)this.matrix[e][t+i]=r;else for(i=0;i<r.length;i++)this.matrix[e+i][t]=r;return this},recieveAttack(t,e){return null!=this.matrix[e][t]?(this.matrix[e][t].hit(0),this.matrix[e][t]=this.matrix[e][t],this):(this.matrix[e][t]=!0,this)},anyShipsAlive(){for(let t=0;t<this.matrix.length;t++)for(let e=0;e<this.matrix[t].length;e++)if(null!=this.matrix[t][e]&&1!=this.matrix[t][e]&&0==this.matrix[t][e].isSunk())return!0;return!1}})},function(t,e){carrier={name:\"Carrier\",length:5},battleship={name:\"Battleship\",length:4},cruiser={name:\"Cruiser\",length:3},destroyer={name:\"Destroyer\",length:3},patrolBoat={name:\"Patrol Boat\",length:2},submarine={name:\"Submarine\",length:1},t.exports.createShip=({name:t,length:e,horizontal:r})=>({name:t,length:e,horizontal:r,hits:Array(e).fill(0),hit(){return foundIndex=this.hits.findIndex(t=>0==t),this.hits[foundIndex]=1,this},isSunk(){return this.hits.every(t=>1==t)}}),t.exports.carrier=carrier,t.exports.battleship=battleship,t.exports.cruiser=cruiser,t.exports.destroyer=destroyer,t.exports.patrolBoat=patrolBoat,t.exports.submarine=submarine},function(t,e){t.exports=(t=!1,e=\"player\")=>({ai:t,name:e,needToSelectSquare:!0,attacks:[],attackBoard(t,e,r){return!(t>=r.size||e>=r.size||this.attacks.includes(`[${t},${e}]`)||(r.recieveAttack(t,e),this.attacks.push(`[${t},${e}]`),0))},randomAttack(t){let e=t.size;for(;;){let r=Math.floor(Math.random()*(+e-0))+0,i=Math.floor(Math.random()*(+e-0))+0;if(this.attackBoard(r,i,t))break}}})},function(t,e){const r=(t,e,a,n,o,l)=>{let s=e;for(;s.firstChild;)s.removeChild(s.firstChild);for(i=0;i<t.size;i++){let h=document.createElement(\"tr\");for(j=0;j<t.size;j++){let s=document.createElement(\"td\");s.className=\"square\",a.ai?s.id=`C${j}${i}`:s.id=`P${j}${i}`,!0===t.matrix[i][j]?s.innerHTML=\"_\":null===t.matrix[i][j]?s.innerHTML=\"&nbsp\":t.matrix[i][j].isSunk()?(s.innerHTML=\"X\",s.classList.add(\"destroyed\")):n.attacks.includes(`[${j},${i}]`)?s.innerHTML=\"x\":\"potato\"==a.ai?s.innerHTML=\"&nbsp\":t.matrix[i][j].horizontal?s.innerHTML=\"&#8594\":s.innerHTML=\"&#8593\",a.ai&&s.addEventListener(\"click\",()=>{let i=s.id[1],h=s.id[2];n.attackBoard(i,h,t),r(t,e,a,n,o,l),0==t.anyShipsAlive()&&alert(`${n.name} wins!`),a.randomAttack(o),r(o,l,n,a,t,e),0==o.anyShipsAlive()&&alert(`${a.name} wins!`)}),h.appendChild(s)}s.appendChild(h)}};t.exports.updateBoard=r}]);","extractedComments":[]}