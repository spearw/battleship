{"code":"!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){const r=i(1),n=i(2),a=i(3),s=i(4);function o(t=!1,e=!1,i=!0,o=\"player\",u=\"AI\",m=10){console.log(\"creating players...\");let h=a(e,o),d=a(i,u);console.log(\"generating boards...\");let p=r(m),f=r(m);console.log(\"creating ships\");let x=n.createShip(n.carrier),g=n.createShip(n.battleship),j=n.createShip(n.cruiser),k=n.createShip(n.destroyer),H=n.createShip(n.patrolBoat);console.log(\"placing ships...\"),t?c(p,x,g,j,k,H):l(p,x,g,j,k,H);let S=n.createShip(n.carrier),y=n.createShip(n.battleship),b=n.createShip(n.cruiser),M=n.createShip(n.destroyer),B=n.createShip(n.patrolBoat);t?c(f,S,y,b,M,B):l(f,S,y,b,M,B),console.log(\"showing boards...\");let I=document.getElementById(\"board1\"),L=document.getElementById(\"board2\");s.updateBoard(p,I,h,d,f,L),s.updateBoard(f,L,d,h,p,I)}function l(t,e,i,r,n,a){u(t,e),u(t,i),u(t,r),u(t,n),u(t,a)}function u(t,e){let i=t.size;for(;;){let r=Math.floor(Math.random()*(+i-0))+0,n=Math.floor(Math.random()*(+i-0))+0,a=Math.random()>=.5;if(t.placeShip(r,n,e,a))break}}function c(t,e,i,r,n,a){t.placeShip(1,1,e,!0),t.placeShip(8,5,i,!1),t.placeShip(2,3,r,!1),t.placeShip(5,4,n,!0),t.placeShip(2,8,a,!0)}document.getElementById(\"newgame\").addEventListener(\"click\",()=>{o()}),o()},function(t,e){const r=t=>{matrix=[];for(var e=0;e<t;e++)matrix[e]=new Array(t),matrix[e].fill(null);return matrix};t.exports=t=>({size:t,matrix:r(t),placeShip(t,e,r,n=!0){if(n)for(r.horizontal=!0,i=0;i<r.length;i++){if(null!=this.matrix[e][t+i])return!1;if(e>=matrix.length||t+i>=matrix[e].length)return!1}else for(r.horizontal=!1,i=0;i<r.length;i++){if(e+i>=matrix.length||t>=matrix[e].length)return!1;if(null!=this.matrix[e+i][t])return!1}if(n)for(i=0;i<r.length;i++)this.matrix[e][t+i]=r;else for(i=0;i<r.length;i++)this.matrix[e+i][t]=r;return this},recieveAttack(t,e){return null!=this.matrix[e][t]?(this.matrix[e][t].hit(0),this.matrix[e][t]=this.matrix[e][t],!0):(this.matrix[e][t]=!0,!1)},anyShipsAlive(){for(let t=0;t<this.matrix.length;t++)for(let e=0;e<this.matrix[t].length;e++)if(null!=this.matrix[t][e]&&1!=this.matrix[t][e]&&0==this.matrix[t][e].isSunk())return!0;return!1}})},function(t,e){carrier={name:\"Carrier\",length:5},battleship={name:\"Battleship\",length:4},cruiser={name:\"Cruiser\",length:3},destroyer={name:\"Destroyer\",length:3},patrolBoat={name:\"Patrol Boat\",length:2},submarine={name:\"Submarine\",length:1},t.exports.createShip=({name:t,length:e,horizontal:i})=>({name:t,length:e,horizontal:i,hits:Array(e).fill(0),hit(){return foundIndex=this.hits.findIndex(t=>0==t),this.hits[foundIndex]=1,this},isSunk(){return this.hits.every(t=>1==t)}}),t.exports.carrier=carrier,t.exports.battleship=battleship,t.exports.cruiser=cruiser,t.exports.destroyer=destroyer,t.exports.patrolBoat=patrolBoat,t.exports.submarine=submarine},function(t,e){t.exports=(t=!1,e=\"player\")=>({ai:t,name:e,justSunk:!1,justHit:!1,attacks:[],attackBoard(t,e,i){return console.log(\"attacking\",t,e),!(t<0||e<0||t>=i.size||e>=i.size||this.attacks.includes(`[${t},${e}]`)||(i.recieveAttack(t,e),this.attacks.push(`[${t},${e}]`),0))},randomAttack(t){let e=t.size;for(;;){let i=Math.floor(Math.random()*(+e-0))+0,r=Math.floor(Math.random()*(+e-0))+0;if(this.attackBoard(i,r,t))break}}})},function(t,e){const r=(t,e,n,a,s,o)=>{let l=e;for(;l.firstChild;)l.removeChild(l.firstChild);for(i=0;i<t.size;i++){let u=document.createElement(\"tr\");for(j=0;j<t.size;j++){let l=document.createElement(\"td\");l.className=\"square\",n.ai?l.id=`C${j}${i}`:l.id=`P${j}${i}`,!0===t.matrix[i][j]?l.innerHTML=\"_\":null===t.matrix[i][j]?l.innerHTML=\"&nbsp\":t.matrix[i][j].isSunk()?(l.innerHTML=\"X\",l.classList.add(\"destroyed\")):a.attacks.includes(`[${j},${i}]`)?l.innerHTML=\"x\":\"potato\"==n.ai?l.innerHTML=\"&nbsp\":t.matrix[i][j].horizontal?l.innerHTML=\"&#8594\":l.innerHTML=\"&#8593\",n.ai&&l.addEventListener(\"click\",()=>{let i=l.id[1],u=l.id[2];a.attackBoard(i,u,t),document.getElementById(\"playerLocation\").innerHTML=a.attacks[a.attacks.length-1],console.log(t.matrix[u][i]),!0===t.matrix[u][i]?document.getElementById(\"playerOutcome\").innerHTML=\"Miss!\":t.matrix[u][i].isSunk()?(document.getElementById(\"aiOutcome\").innerHTML=\"Sunk \"+s.matrix[u][i].name+\"!\",n.justHit=!1):(document.getElementById(\"aiOutcome\").innerHTML=\"Hit!\",n.justHit=`${i}${u}`),r(t,e,n,a,s,o),0==t.anyShipsAlive()&&alert(`${a.name} wins!`),n.justHit?(console.log(\"just hit\",n.justHit),n.attackBoard(parseInt(n.justHit[0])+1,n.justHit[1],s)?1==s.matrix[n.justHit[1]][parseInt(n.justHit[0])+1]||s.matrix[n.justHit[1]][parseInt(n.justHit[0])+1].isSunk()&&(console.log(\"sunk!\"),n.justSunk=!0):n.attackBoard(parseInt(n.justHit[0])-1,n.justHit[1],s)?1==s.matrix[n.justHit[1]][parseInt(n.justHit[0])-1]||s.matrix[n.justHit[1]][parseInt(n.justHit[0])-1].isSunk()&&(console.log(\"sunk!\"),n.justSunk=!0):n.attackBoard(n.justHit[0],parseInt(n.justHit[1])+1,s)?1==s.matrix[parseInt(n.justHit[1])+1][n.justHit[0]]||s.matrix[parseInt(n.justHit[1])+1][n.justHit[0]].isSunk()&&(console.log(\"sunk!\"),n.justSunk=!0):n.attackBoard(n.justHit[0],parseInt(n.justHit[1])-1,s)?1==s.matrix[parseInt(n.justHit[1])-1][n.justHit[0]]||s.matrix[parseInt(n.justHit[1])-1][n.justHit[0]].isSunk()&&(console.log(\"sunk!\"),n.justSunk=!0):n.randomAttack(s)):n.randomAttack(s),lastAttack=n.attacks[n.attacks.length-1]||\"[0,0]\";let c=lastAttack[1],m=lastAttack[3];document.getElementById(\"aiLocation\").innerHTML=n.attacks[n.attacks.length-1],!0===s.matrix[m][c]?(document.getElementById(\"aiOutcome\").innerHTML=\"Miss!\",n.justSunk=!1):s.matrix[m][c].isSunk()?(document.getElementById(\"aiOutcome\").innerHTML=\"Sunk \"+s.matrix[m][c].name+\"!\",n.justHit=!1):(document.getElementById(\"aiOutcome\").innerHTML=\"Hit!\",n.justHit=`${c}${m}`),r(s,o,a,n,t,e),0==s.anyShipsAlive()&&alert(`${n.name} wins!`)}),u.appendChild(l)}l.appendChild(u)}};t.exports.updateBoard=r}]);","extractedComments":[]}